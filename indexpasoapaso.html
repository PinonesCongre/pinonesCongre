<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Congregacion Pinones</title>
    <!--FAVICON-->
    <link rel="icon" href="/img/favicon.ico">
    <!--FIREBASE-->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
	<!--ALERTAS POP-UP-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.all.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!--VALIDACION-->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
    <!--Estilo nuevo-->
    <link rel="stylesheet" href="/CSS/indexnew.css">
    <script src="/JS/systemResponsiveAyuda.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.css" />
    <script src="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6.3.1/dist/tippy-bundle.umd.min.js"></script>

    <style>
        .form-step {
            display: none;
        }
        .form-step.active {
            display: block;
        }
        .navigation-buttons {
            margin-top: 20px;
        }
        .navigation-buttons button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
        }
        .navigation-buttons .next-btn {
            background-color: #4CAF50;
            color: white;
        }
        .navigation-buttons .next-btn:hover {
            background-color: #45a049;
            transform: scale(1.05);
        }
        .navigation-buttons .prev-btn {
            background-color: #8ec7f3;
            color: black;
        }
        .navigation-buttons .prev-btn:hover {
            background-color: #ddd;
            transform: scale(1.05);
        }
        .yes, .no {
            margin-top: 10px;
            padding: 10px 20px;
            cursor: pointer;
        }
        #submit-btn {
            display: none;
        }

            /* Estilos para Tippy.js tema para personas mayores - Modo Normal */
        .tippy-box {
        background-color: #8db5e0; /* Fondo gris claro */
        color: #ffffff; /* Texto oscuro para contraste */
        border-radius: 8px; /* Bordes redondeados */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Sombra suave */
        }

        .tippy-arrow {
        color: #8db5e0; /* Color azul claro para la flecha en modo normal */
        }

        /* Tema para el contenido del tooltip */
        .tippy-content {
        font-size: 14px; /* Tamaño de fuente legible */
        padding: 10px 15px; /* Espaciado interior */
        }

        /* Tema para el título del tooltip */
        .tippy-content h3 {
        font-size: 16px; /* Tamaño de título */
        margin-bottom: 8px; /* Espaciado inferior */
        color: #ffffff; /* Color de texto más oscuro */
        }

        /* Estilos para Tippy.js tema para personas mayores - Modo Oscuro */
        .tippy-box.dark-theme {
        background-color: #333; /* Fondo oscuro */
        color: #f0f0f0; /* Texto claro para contraste */
        border-radius: 8px; /* Bordes redondeados */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4); /* Sombra más pronunciada */
        }

        .tippy-box.dark-theme .tippy-arrow {
        color: #333; /* Color oscuro para la flecha en modo oscuro */
        }
    </style>
    
</head>
<body>
    <div class="navbar">
        <div class="left-menu">
            <div class="slider" id="dark-mode-toggle">
                <i class="fas fa-sun sun"></i>
                <i class="fas fa-moon moon"></i>
                <div class="thumb"></div>
            </div>
        </div>
        <div class="right-menu">
            <a href="/yetilogin/indexyeti.html" id="login"><i class="fas fa-user-alt"></i></a>
            <a href="#" id="info"><i class="fas fa-info-circle"></i></a>
        </div>
    </div>
    <!-- DE AQUI EN ADELANTE SE PUEDE MODIFICA EL CODIGO-->
    <div class="container" id="form-container">
        <h1 id="form-title">Informes mes de <span id="current-month"></span> 2024</h1>
        <form id="guided-form">
            <div class="form-step active">
                <label for="nombre-completo">Nombre Completo:</label>
                <input type="text" id="nombre-completo" name="nombre-completo" placeholder="Nombre completo" required data-tippy-content="Ingrese su nombre completo">
                <span class="error-message">Este campo es obligatorio.</span>

                <label for="rol">Rol:</label>
                <select id="rol" name="rol" required data-tippy-content="Seleccione su rol">
                    <option value="">Seleccione una opción</option>
                    <option value="Publicador">Publicador</option>
                    <option value="Precursor Auxiliar">Precursor Auxiliar</option>
                    <option value="Precursor Regular">Precursor Regular</option>
                </select>
                <span class="error-message">Este campo es obligatorio.</span>

                <div class="navigation-buttons">
                    <button type="button" class="next-btn" onclick="nextStep()">Siguiente</button>
                </div>
            </div>

            <div class="form-step">
                <label for="hours">Número de Horas:</label>
                <input type="number" id="hours" name="numero-horas" placeholder="Número de horas" required data-tippy-content="Si es publicador coloque 0 horas">
                <span class="error-message">Este campo es obligatorio.</span>

                <label for="bibleCourse">Número de Cursos Bíblicos:</label>
                <input type="number" id="bibleCourse" name="cursoBiblicos" placeholder="Número de cursos bíblicos" required data-tippy-content="Ingrese el número de cursos bíblicos">
                <span class="error-message">Este campo es obligatorio.</span>

                <label>Participó en alguna faceta de la predicación durante el mes:</label>
                <div>
                    <button type="button" class="yes" onclick="setParticipacion(true)" data-tippy-content="Seleccione 'Sí' si participó">Sí</button>
                    <button type="button" class="no" onclick="setParticipacion(false)" data-tippy-content="Seleccione 'No' si no participó">No</button>
                </div>
                <input type="hidden" id="participacion" name="participacion">
                <span class="error-message">Debes seleccionar una opción.</span>

                <div class="navigation-buttons">
                    <button type="button" class="prev-btn" onclick="prevStep()">Anterior</button>
                    <button type="button" class="next-btn" onclick="nextStep()">Siguiente</button>
                </div>
            </div>

            <div class="form-step">
                <label for="superintendente">Superintendente de Servicio:</label>
                <select id="superintendente" name="superintendente" required data-tippy-content="Seleccione su superintendente">
                    <option value="">Seleccione una opción</option>
                    <option value="Alfonso.P Grupo 1">Alfonso.P Grupo 1</option>
                    <option value="Rafael.G Grupo 2">Rafael.G Grupo 2</option>
                    <option value="Alberto.G Grupo 3">Alberto.G Grupo 3</option>
                    <option value="Josue.T Grupo 4">Josue.T Grupo 4</option>
                    <option value="Mario.B & Marco.H Grupo 5">Mario.B & Marco.H Grupo 5</option>
                </select>
                <span class="error-message">Este campo es obligatorio.</span>

                <label for="notes">Notas:</label>
                <textarea id="notes" name="notes" placeholder="Escriba sus notas aquí" data-tippy-content="Ingrese sus notas"></textarea>
                <span class="error-message"></span>

                <div class="navigation-buttons">
                    <button type="button" class="prev-btn" onclick="prevStep()">Anterior</button>
                    <button type="submit">Enviar</button>
                </div>
            </div>
        </form>
    </div>

    <script>
        let currentStep = 0;
        const steps = $('.form-step');

        function showStep(step) {
            steps.each(function(index) {
                $(this).toggleClass('active', index === step);
            });
        }

        function validateStep() {
            const currentStepDiv = steps.eq(currentStep);
            const inputs = currentStepDiv.find('input[required], select[required], textarea[required]');
            let valid = true;

            inputs.each(function() {
                if (!$(this).val()) {
                    valid = false;
                    $(this).addClass('invalid');
                    $(this).next('.error-message').show();
                } else {
                    $(this).removeClass('invalid');
                    $(this).next('.error-message').hide();
                }
            });

            return valid;
        }

        function nextStep() {
            if (validateStep()) {
                if (currentStep < steps.length - 1) {
                    currentStep++;
                    showStep(currentStep);
                }
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function setParticipacion(value) {
            $("#participacion").val(value ? "Sí" : "No");
            $(".yes").css("background-color", value ? "green" : "");
            $(".no").css("background-color", value ? "" : "red");
        }

        $('#current-month').text(new Date().toLocaleString('es-ES', { month: 'long' }));

        // Inicializar tooltips con Tippy.js
        tippy('[data-tippy-content]', {
            placement: 'top',
            animation: 'shift-toward',
            // theme: 'retro',
            arrow: true
        });
    </script>
    

    <!-- ESTA PARTE DEL CODIGO NO SE MODIFICA PARA LA GUIA PASO A PASO DEL ENVIO DEL INFORME-->
    <div class="footer">
        <div class="left-footer">
            <img src="/img/favicon.ico" alt="Logo">
            <span>Congregación Piñones</span>
        </div>
        <div class="right-footer">
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">
                <img alt="Licencia Creative Commons" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png">
            </a>
            <p>Esta obra está bajo una <br>
                <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Licencia Creative Commons Atribución-NoComercial-SinDerivadas 4.0 Internacional</a>.
            </p>
        </div>
    </div>
    

    <div class="banner" id="info-banner">
        <h2>Información sobre la página</h2>
        <p>Este sitio web ha sido desarrollado con la intención de servir a la comunidad de manera gratuita y sin fines de lucro. Fue creado como respuesta a una necesidad en la congregación piñones, con el objetivo de facilitar la comunicación y la difusión de información relevante.</p>
        <p>Además, se ha trabajado para garantizar la seguridad de la información y la privacidad de los usuarios. Este sitio web es un ejemplo del poder que tiene la tecnología para facilitar la colaboración y la comunicación.</p>
        <h3>Desarrollado por Leonardo Gonzalez</h3>
        <h3>Todos los derechos reservados &copy; 2023 | Leonardo Gonzalez</h3>
        <h3>Congregacion Piñones</h3>
        <button class="close-btn" id="close-banner"><i class="fas fa-door-closed"></i></button>
    </div>

    <script>
        function setParticipacion(participo) {
            var yesButton = document.querySelector('.yes');
            var noButton = document.querySelector('.no');
            var hiddenInput = document.getElementById('participacion');

            if (participo) {
                yesButton.classList.add('selected');
                noButton.classList.remove('selected');
                hiddenInput.value = 'Sí';
            } else {
                yesButton.classList.remove('selected');
                noButton.classList.add('selected');
                hiddenInput.value = 'No';
            }
        }
    </script>

     <script>
        // Función para activar/desactivar el modo oscuro
        function toggleDarkMode() {
            const body = document.body;
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const isDarkMode = localStorage.getItem('darkMode') === 'true';

            if (isDarkMode) {
                body.classList.add('dark-mode');
                darkModeToggle.classList.add('active');
            } else {
                body.classList.remove('dark-mode');
                darkModeToggle.classList.remove('active');
            }
        }

        // Función para guardar el estado del modo oscuro en localStorage
        function saveDarkModeState(isDarkMode) {
            localStorage.setItem('darkMode', isDarkMode ? 'true' : 'false');
        }

        // Evento al hacer click en el toggle del modo oscuro
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        darkModeToggle.addEventListener('click', () => {
            const body = document.body;
            body.classList.toggle('dark-mode');
            darkModeToggle.classList.toggle('active');

            // Guarda el estado del modo oscuro
            const isDarkMode = body.classList.contains('dark-mode');
            saveDarkModeState(isDarkMode);
        });

        // Cargar el estado del modo oscuro al cargar la página
        toggleDarkMode();
    </script>

    <script>
        const infoButton = document.getElementById('info');
    const banner = document.getElementById('info-banner');
    const closeBannerButton = document.getElementById('close-banner');

    infoButton.addEventListener('click', (event) => {
        event.preventDefault();
        banner.style.display = 'block';
    });

    closeBannerButton.addEventListener('click', () => {
        banner.style.display = 'none';
    });

    const yesButton = document.querySelector('.answer-buttons .yes');
    const noButton = document.querySelector('.answer-buttons .no');

    yesButton.addEventListener('click', () => {
        yesButton.style.backgroundColor = '#28a745';
        noButton.style.backgroundColor = '';
    });

    noButton.addEventListener('click', () => {
        noButton.style.backgroundColor = '#dc3545';
        yesButton.style.backgroundColor = '';
    });

      // Ejemplo de función de alerta con SweetAlert y tema oscuro
        function showAlert(message, icon) {
            const isDarkMode = document.body.classList.contains('dark-mode');
            Swal.fire({
                text: message,
                icon: icon,
                background: isDarkMode ? '#1e1e1e' : '#fff',
                color: isDarkMode ? '#fff' : '#000',
                confirmButtonColor: isDarkMode ? '#3085d6' : '#d33',
            });
        }

        // Llama a showAlert según sea necesario, por ejemplo:
        // showAlert('Esto es una alerta', 'success');
    </script>

    <!--Actualizacion del mes automatizada-->
    
    <script>
        // Función para actualizar el mes
        function actualizarMes() {
          // Obtiene la fecha actual
          var currentDate = new Date();
        
          // Obtiene el elemento del mes
          var monthElement = document.getElementById('current-month');
        
          // Obtiene el mes anterior (teniendo en cuenta que los meses comienzan desde 0)
          var previousMonth = currentDate.getMonth() - 1;
        
          // Si el mes actual es enero, ajusta el mes anterior a diciembre del año anterior
          if (previousMonth < 0) {
            previousMonth = 11; // diciembre es el mes 11
          }
        
          // Actualiza el contenido del elemento del mes
          monthElement.textContent = obtenerNombreDelMes(previousMonth + 1);
        }
      
        // Función para obtener el nombre del mes según su número
        function obtenerNombreDelMes(month) {
          var meses = [
            'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
            'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'
          ];
          return meses[month - 1];
        }
      
        // Actualiza el mes inicialmente
        actualizarMes();
      
        // Programa la actualización del mes cada 20 días (en milisegundos)
        setInterval(actualizarMes, 20 * 24 * 60 * 60 * 1000);
      </script>
      
      
    <script src="/JS/RTDB.js"></script>
    
    <!-- Publicador -->
    <script>
      // Espera a que el documento esté listo
      document.addEventListener('DOMContentLoaded', function () {
          // Obtén el elemento select del rol
          var rolSelect = document.getElementById('rol');
    
          // Agrega un evento 'change' al select
          rolSelect.addEventListener('change', function () {
              // Obtiene el valor seleccionado
              var selectedValue = rolSelect.value;
    
              // Verifica si se seleccionó "Publicador"
              if (selectedValue === 'Publicador') {
                  // Muestra el SweetAlert con formato HTML
                  Swal.fire({
                      title: 'Aviso',
                      icon: 'warning',
                      html: 'Has seleccionado la opción <strong>"Publicador"</strong>.<br><br>' +
                      '<strong>1) Deberá indicar si participó de alguna manera en el ministerio durante el mes en la casilla.</strong><br>' +
                      '<strong>2) El número de cursos bíblicos que dirigió; los demás campos se encuentran deshabilitados.</strong>',
                      confirmButtonText: 'Aceptar'
                  });
              }
          });
      });
    </script>
    <!-- Precursor Regular -->
    <script>
      // Espera a que el documento esté listo
      document.addEventListener('DOMContentLoaded', function () {
          // Obtén el elemento select del rol
          var rolSelect = document.getElementById('rol');
    
          // Agrega un evento 'change' al select
          rolSelect.addEventListener('change', function () {
              // Obtiene el valor seleccionado
              var selectedValue = rolSelect.value;
    
              // Verifica si se seleccionó "Publicador"
              if (selectedValue === 'Precursor Regular') {
                  // Muestra el SweetAlert con formato HTML
                  Swal.fire({
                      title: 'Aviso',
                      icon: 'warning',
                      html: 'Has seleccionado la opción <strong>"Precursor Regular"</strong>.<br><br>' +
                      '<strong>1) Deberá indicar el numero de horas que dedico al ministerio.</strong><br>' +
                      '<strong>2) Deberá indicar si participó de alguna manera en el ministerio durante el mes en la casilla.</strong><br>'+
                      '<strong>3) El número de cursos bíblicos que dirigió; los demás campos se encuentran deshabilitados.</strong>',
                      confirmButtonText: 'Aceptar'
                  });
              }
          });
      });
    </script>
    
    <!-- Precursor Auxiliar-->
    
    <script>
      // Espera a que el documento esté listo
      document.addEventListener('DOMContentLoaded', function () {
          // Obtén el elemento select del rol
          var rolSelect = document.getElementById('rol');
    
          // Agrega un evento 'change' al select
          rolSelect.addEventListener('change', function () {
              // Obtiene el valor seleccionado
              var selectedValue = rolSelect.value;
    
              // Verifica si se seleccionó "Publicador"
              if (selectedValue === 'Precursor Auxiliar') {
                  // Muestra el SweetAlert con formato HTML
                  Swal.fire({
                      title: 'Aviso',
                      icon: 'warning',
                      html: 'Has seleccionado la opción <strong>"Precursor Auxiliar"</strong>.<br><br>' +
                      '<strong>1) Deberá indicar el numero de horas que dedico al ministerio.</strong><br>' +
                      '<strong>2) Deberá indicar si participó de alguna manera en el ministerio durante el mes en la casilla.</strong><br>'+
                      '<strong>3) El número de cursos bíblicos que dirigió; los demás campos se encuentran deshabilitados.</strong>',
                      confirmButtonText: 'Aceptar'
                  });
              }
          });
      });
    </script>
</body>
</html>